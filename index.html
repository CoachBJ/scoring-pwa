<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="manifest.webmanifest">
  <title>Charlotte Christian — Game Manager</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main>
    <header class="appbar">
      <img src="black_script.png" class="app-logo" alt="CC logo">
      <h1 class="app-title">CHARLOTTE CHRISTIAN FOOTBALL GAME MANAGER</h1>
      <img src="black_script.png" class="app-logo" alt="Knight logo">
    </header>

    <div class="layout">
      <details class="panel area-setup" open>
        <summary>Pre-Game Setup</summary>
        
        <div class="row compact">
          <label>Opponent</label>
          <input id="oppName" type="text" value="Opponent" autocomplete="off" />
          <div class="color-pick">
            <label for="oppColor" class="muted">Color</label>
            <input id="oppColor" type="color" value="#9a9a9a" />
          </div>
        </div>

        <div class="row toggles compact kickoff-row">
          <label><input id="weReceivedKO" type="radio" name="openingKO" value="we"> We received the opening kickoff</label>
          <label><input id="oppReceivedKO" type="radio" name="openingKO" value="opp">
            <span id="oppNameInline">Opponent</span> received the opening kickoff
          </label>
        </div>

        <div class="subhead">Officials</div>
        <div class="row compact">
          <label class="w-30">Head Ref</label>
          <input id="headRef" type="text" placeholder="Enter head ref name" autocomplete="off" />
        </div>
        <div class="row compact">
          <label class="w-30">Side Judge (our sideline)</label>
          <input id="sideJudge" type="text" placeholder="Enter side judge name" autocomplete="off" />
        </div>
      </details>
      
      <aside class="card area-side">
        <details class="panel" id="defensePanel" open>
          <summary>Defensive Calls (1–75)</summary>
          <div id="defList" class="playlist"></div>
          <div class="playlist-actions">
            <button id="defClear" class="mini">Clear All</button>
          </div>
        </details>

        <details class="panel" id="offensePanel" open>
          <summary>Offensive Calls (1–75)</summary>
          <div id="offList" class="playlist"></div>
          <div class="playlist-actions">
            <button id="offClear" class="mini">Clear All</button>
          </div>
        </details>
        <details class="panel" id="touchPanel">
          <summary>Offensive Touch Chart</summary>
          <div class="touch-counter">
            <div class="tc-head">
              <div class="tc-title">Touches</div>
              <div>Total: <span id="tcTotal">0</span></div>
            </div>
            <div id="tcList" class="tc-list"></div>
            <div class="tc-footer">
              <button id="tcReset" class="btn">Reset Touches</button>
            </div>
          </div>
        </details>

        <button id="exportPlays" class="btn btn-primary" aria-label="Export plays and touches as CSV">
          Export Plays CSV
        </button>
      </aside>

      <section class="card area-score">
        <h2 class="section-title">Scoreboard</h2>

        <div class="score-grid">
          <div class="score-card">
            <div class="score-label"><span id="ourLabel">Charlotte Christian</span></div>
            <input id="ourScore" type="number" inputmode="numeric" pattern="[0-9]*" value="0" class="score-input" autocomplete="off" />
            <div class="quick-row">
              <button class="chip" data-team="our" data-delta="2">+2</button>
              <button class="chip" data-team="our" data-delta="3">+3</button>
              <button class="chip" data-team="our" data-delta="6">+6</button>
              <button class="chip" data-team="our" data-delta="7">+7</button>
              <button class="chip" data-team="our" data-delta="8">+8</button>
            </div>
          </div>
          <div class="score-card">
            <div class="score-label"><span id="oppLabel">Opponent</span></div>
            <input id="oppScore" type="number" inputmode="numeric" pattern="[0-9]*" value="0" class="score-input" autocomplete="off" />
            <div class="quick-row">
              <button class="chip opp" data-team="opp" data-delta="2">+2</button>
              <button class="chip opp" data-team="opp" data-delta="3">+3</button>
              <button class="chip opp" data-team="opp" data-delta="6">+6</button>
              <button class="chip opp" data-team="opp" data-delta="7">+7</button>
              <button class="chip opp" data-team="opp" data-delta="8">+8</button>
            </div>
          </div>
        </div>

        <div class="timeouts-bar" aria-live="polite">
          <div class="side left">
            <strong>Charlotte Christian TO LEFT:</strong> <span id="ourTOLeft">3</span>
          </div>
          <div class="side right">
            <strong><span id="oppTOName">Opponent</span> TO LEFT:</strong> <span id="oppTOLeft">3</span>
          </div>
          <div class="tinyBtns to-quick">
            <button id="useOurTO" class="mini">Use CC TO (current half)</button>
            <button id="useOppTO" class="mini opp">Use Opp TO (current half)</button>
          </div>
        </div>

        <div id="banner" aria-live="polite"></div>

        <details class="panel" id="gameSettings">
          <summary>View Settings</summary> <div class="row toggles compact">
            <label><input id="view-table" type="radio" name="view" checked> Table</label>
            <label><input id="view-row"   type="radio" name="view"> One Row</label>
          </div>
          
          </details>

        <div class="sticky-officials" id="stickyOfficials">
          <div id="secondHalfInfo" class="muted tiny-info">2nd-half kickoff: —</div>
          <div class="officials-display" id="officialsDisplay" style="display:none">
            <div class="official-name" id="headRefDisplay"></div>
            <div class="official-name" id="sideJudgeDisplay"></div>
          </div>
          <button type="button" id="clearOfficials" class="link-btn small">Clear officials</button>
        </div>

        <section class="card turnovers" id="turnoversCard">
          <h2 class="section-title">Turnovers</h2>
          <div class="to-2col">
            <div class="col our">
              <div class="team-name">Charlotte Christian</div>
              <div class="labels"><div>Fumbles Lost</div><div>Fumbles Rec</div><div>INT Thrown</div></div>
              <div class="ctrls">
                <div class="trio">
                  <button id="ourFLminus" class="mini">−</button>
                  <div id="ourFL" class="val">0</div>
                  <button id="ourFLplus"  class="mini">+</button>
                </div>
                <div class="trio">
                  <button id="ourFRminus" class="mini">−</button>
                  <div id="ourFR" class="val">0</div>
                  <button id="ourFRplus"  class="mini">+</button>
                </div>
                <div class="trio">
                  <button id="ourINTminus" class="mini">−</button>
                  <div id="ourINT" class="val">0</div>
                  <button id="ourINTplus"  class="mini">+</button>
                </div>
              </div>
            </div>

            <div class="col opp">
              <div class="team-name"><span id="oppNameTO">Opponent</span></div>
              <div class="labels"><div>Fumbles Lost</div><div>Fumbles Rec</div><div>INT Thrown</div></div>
              <div class="ctrls">
                <div class="trio">
                  <button id="oppFLminus" class="mini">−</button>
                  <div id="oppFL" class="val">0</div>
                  <button id="oppFLplus"  class="mini">+</button>
                </div>
                <div class="trio">
                  <button id="oppFRminus" class="mini">−</button>
                  <div id="oppFR" class="val">0</div>
                  <button id="oppFRplus"  class="mini">+</button>
                </div>
                <div class="trio">
                  <button id="oppINTminus" class="mini">−</button>
                  <div id="oppINT" class="val">0</div>
                  <button id="oppINTplus"  class="mini">+</button>
                </div>
              </div>
            </div>
          </div>

          <div id="toDiff" class="to-diff">TO Margin: 0</div>
        </section>

        <p id="status" class="muted"></p>
      </section>

      <section class="card area-clock">
        </section>

      <section class="area-output">
        </section>
    </div>
  </main>

  <script src="app.js" defer></script>
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js', { scope: './' });
  }
  </script>
</body>
</html>
